<div class="container mx-auto p-4 bg-white shadow-xl rounded-xl mt-8">
<h1 class="text-3xl font-bold text-gray-800 mb-6">Lista de Alumnos UTL</h1>

<a class="bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg px-5 py-2.5 inline-block mb-4 transition duration-200"
[routerLink]="['/utl/agregar']">
Agregar Alumno
</a>

<div class="mb-6">
<label for="filterInput" class="block text-sm font-medium text-gray-700 mb-1">Filtrar por nombre:</label>
<input type="text" id="filterInput" class="border border-gray-300 rounded-lg p-2 w-full md:w-1/3 focus:ring-blue-500 focus:border-blue-500"
[(ngModel)]="listFilter" placeholder="Escribe el nombre aquí">
</div>

<!-- Mensajes de estado -->

<div *ngIf="loading" class="text-center p-4">
<p class="text-lg text-blue-600">Cargando alumnos...</p>
</div>

<div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
{{ errorMessage }}
</div>

<!-- Tabla de alumnos -->

<div class="overflow-x-auto">
<table class="min-w-full divide-y divide-gray-200">
<thead class="bg-gray-50">
<tr>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Matricula</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Apaterno</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amaterno</th>
<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Correo</th>
<th colspan="2" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
</tr>
</thead>

  <tbody class="bg-white divide-y divide-gray-200" *ngIf="alumnos.length > 0">
    <!-- Aplicamos el pipe aquí. Asegúrate de que el pipe devuelva siempre un array, incluso si está vacío. -->
    <tr *ngFor="let alumno of alumnos | alumnoFilter:listFilter" class="hover:bg-gray-50 transition duration-150">
      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ alumno.matricula }}</td>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ alumno.nombre | uppercase }}</td>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ alumno.apaterno }}</td>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ alumno.amaterno }}</td>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-blue-600 truncate max-w-xs">{{ alumno.correo }}</td>

      <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium w-fit">
        <a class="bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg px-3 py-1.5 transition duration-200"
           [routerLink]="['/utl/editar', alumno.matricula]">
          Editar
        </a>
      </td>

      <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium w-fit">
        <a class="bg-red-500 hover:bg-red-600 text-white font-medium rounded-lg px-3 py-1.5 transition duration-200"
           [routerLink]="['/utl/eliminar', alumno.matricula]">
          Eliminar
        </a>
      </td>
    </tr>
  </tbody>
</table>


</div>

<div *ngIf="!loading && (alumnos | alumnoFilter:listFilter).length === 0" class="alert bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative mt-6">
No se encontraron alumnos con el filtro especificado.
</div>

</div>
